   if (isset($_POST["savedata"])) {
        foreach ($_POST['timetable_id'] as $key => $timetableID) {
            // Get all data from the form
            $newTimetableID = $_POST['newTimetableID'][$key];
            $lecID = $_POST['lecID'][$key];
            $startTime = $_POST['startTime'][$key];
            $endTime = $_POST['endTime'][$key];
            $day = $_POST['day'][$key];
            $classtype = $_POST['classtype'][$key];
            $subID = $_POST['subID'][$key];
            $venueID = $_POST['venueID'][$key];
            $hours = $_POST['hours'][$key]; // Get the updated class hours

            // Check for clashes with existing timeslots
            $sqlCheckClashes = "SELECT * FROM timetable WHERE lec_id = ? AND day = ? AND ((start_time >= ? AND start_time < ?) OR (end_time > ? AND end_time <= ?) OR (start_time <= ? AND end_time >= ?))";
            $stmtCheckClashes = $mysqli->prepare($sqlCheckClashes);
            $stmtCheckClashes->bind_param('ssssssss', $lecID, $day, $startTime, $endTime, $startTime, $endTime, $startTime, $endTime);
            $stmtCheckClashes->execute();
            $resultClashes = $stmtCheckClashes->get_result();
            $clashesExist = ($resultClashes->num_rows > 0);
            $stmtCheckClashes->close();

            // Prepare and execute the SQL query to update the timetable data
            $sqlUpdateTimetable = "UPDATE timetable SET timetable_id=?, lec_id=?, start_time=?, 
            end_time=?, day=?, classtype=?, subID=?, venueID=?, hours=? WHERE timetable_id=?";
        $stmtUpdateTimetable = $mysqli->prepare($sqlUpdateTimetable);
        $stmtUpdateTimetable->bind_param('ssssssssss', $newTimetableID, $lecID, $startTime, $endTime, 
        $day, $classtype, $subID, $venueID, $hours, $timetableID);
        $stmtUpdateTimetable->execute();
        $stmtUpdateTimetable->close();
        }
    }